# Serfe Uncached Blocks Detector

The propouse of this module is to intercept the normal workflow of page rendering of Magento 2 and force the exit the rendering of the the page if a block that is uncacheable is reached.

This is usefull to debug any module that might contain the following entry inside one of the templates:
```xml
  ....
  <block name="thridpartblock" template="Vendor_Modulename::confirm.phtml" cacheable="false">
  ....
```

### In which cases you will see this module required?

Your PDP page is not having it's cache generated by Magento and you don't know which is the block that is making this behaviour to happen.

Just install this module as developer dependency and configure it from the console or the developer section in the backend section, refresh and see the block name popup as an error on your magento install.

This only works on development mode. On production mode, this module auto-disable itself for security.

## Install

```bash
composer require serfe/module-uncheableblockdetector --dev
bin/magento setup:upgrade
```

If you're in Production Mode this commands as well:
```sh
$ php bin/magento setup:di:compile
$ php bin/magento setup:static-content:deploy
$ php bin/magento cache:flush
```

## Configuration

The module allow to enable or disable the feature on tbe backend section when in developer mode.

Go into

    Backend > Stores > Configuration > Advanced >  Developer 

### Production mode settings - Expert mode

This settings cannot be changed when in production mode as the whole section is disabled by default. 

    You should test this on the local environment only!

If know what you are doint and needed to modify this values on the production server you can run:

```bash
magento config:set --lock-env dev/cache_detector/enabled 1        ( or 0 if you wish to disable)
magento config:set --lock-env dev/cache_detector/die 1   (0 if you just want a warning)
```

# About

[Serfe](https://www.serfe.com/?utm_medium=referral_profile&utm_source=github#115959) develops complete e-commerce solutions based on Magento 2 system and other platforms. Feel free to check it on the website.

# Contributing

We welcome any contribution to this module. Fork the repo, make your changes and create a pull request with your changes.
